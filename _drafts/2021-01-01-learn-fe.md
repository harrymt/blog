---
layout: post
title: Learn Frontend in 2021 (part 2)
tags:
  - react
  - testing
---

Frontend engineer changes every year. Different technologies, libraries and techniques.
This series is everything you need to know to get up to scratch with Frontend Engineering in 2021.

In this part, we will go over

- [Testing React Components]()

## Testing Frontend Code

I think that to properly test frontend code, you should know the 5 parts to test.

1. Functions in React Components
2. React Component prop changes and interactions
3. React Component composition
4. Rendered React Components and their look and feel
5. Cypress E2E testing integrating with your data layer

### 1. Functions in React Components

The first thing you should test are any functions you write inside your components.
For example,

```tsx
export const Posts = ({ id }: { id: string }) => {
  const { error, data, loading } = useQuery(GetPosts, {
    variables: { id },
  });
  
  if (loading) {
    return null;
  }

  if (error) {
    console.error(error);
    return null;
  }
  
  const sortPosts = (posts: { title: string; date: Date; postId: string }[]) => {
    return [...posts].sort((a, b) => a.date.getTime() - b.date.getTime()))
  }
  
  cosnt sortedPosts = sortPosts(posts);
  
  return (
    <ul>
      {sortedPosts.map(({ postId, title, date }) => (
        <li key={postId}>{date} - {title}</li>
      )}
    </ul>
  )
};
```

Notice how the sortPosts function can be tested in isolation to ensure it works correctly.
By bringing it outside of the component we can export it (or place it in another file and export it) so
we can import into our test file and start writing some unit tests.


```tsx
// sortPosts.ts
export const sortPosts = (posts: { title: string; date: Date; postId: string }[]) => {
  return [...posts].sort((a, b) => a.date.getTime() - b.date.getTime()))
}

// sortPosts.test.ts
describe('sortPosts', () => {

  test('sorts posts by date order', () => {
    const UNSORTED_POSTS = [
      { title: "a", date: new Date('2020-12-12'), postId: '1' },
      { title: "b", date: new Date('2020-01-01'), postId: '2' },
    ]
    const SORTED_POSTS = [
      { title: "b", date: new Date('2020-01-01'), postId: '2' },
      { title: "a", date: new Date('2020-12-12'), postId: '1' },
    ]
    expect(sortPosts(UNSORTED_POSTS)).toEqual(SORTED_POSTS);
  })
});
```

